// =================================================================
// üèóÔ∏è PROGRAMACI√ìN ORIENTADA A OBJETOS (POO) - GU√çA PR√ÅCTICA
// =================================================================
// Este archivo te ense√±a POO desde cero con ejemplos reales y pr√°cticos
// Para ejecutar: node app.js

console.log("üèóÔ∏è PROGRAMACI√ìN ORIENTADA A OBJETOS (POO)");
console.log("üìö Conceptos: Clases, Encapsulaci√≥n, Herencia y Polimorfismo");
console.log("=".repeat(60));

// La POO es un paradigma de programaci√≥n que se basa en el concepto de "objetos"
// que contienen datos (atributos) y c√≥digo (m√©todos)

// =================================================================
// üìö 1. ¬øQU√â ES UNA CLASE? - CONCEPTO B√ÅSICO
// =================================================================

console.log("\nüìö 1. ¬øQU√â ES UNA CLASE?");
console.log("Una clase es como un molde o plantilla para crear objetos");
console.log("Vamos a crear una clase User paso a paso:");

// Creamos nuestra primera clase: User
// Una clase agrupa datos (propiedades) y funciones (m√©todos) relacionados
class User {
  // Propiedades est√°ticas - pertenecen a la clase, no a las instancias
  static countUser = 0;

  // Propiedades de instancia - cada objeto tendr√° sus propios valores
  nombre;
  edad;
  email;
  fechaNacimiento;
  contrase√±a;

  // Constructor - se ejecuta cuando creamos un nuevo objeto
  constructor(nombre, email, fechaNacimiento, contrase√±a = "default123") {
    User.countUser++; // Incrementamos el contador de usuarios

    this.nombre = nombre;
    this.email = email;
    this.fechaNacimiento = fechaNacimiento;
    this.edad = this.calcularEdad(); // Calculamos la edad autom√°ticamente
    this.contrase√±a = contrase√±a;
  }

  // Getters y Setters - m√©todos para acceder y modificar propiedades
  getNombre() {
    return this.nombre;
  }

  setNombre(nombre) {
    this.nombre = nombre;
  }

  // M√©todos de l√≥gica de negocio - funcionalidad espec√≠fica de la clase
  calcularEdad() {
    const hoy = new Date();
    const nacimiento = new Date(this.fechaNacimiento);
    let edad = hoy.getFullYear() - nacimiento.getFullYear();
    const mes = hoy.getMonth() - nacimiento.getMonth();
    if (mes < 0 || (mes === 0 && hoy.getDate() < nacimiento.getDate())) {
      edad--;
    }
    return edad;
  }

  saludar() {
    console.log(
      `   Hola, mi nombre es ${this.nombre}, tengo ${this.edad} a√±os y mi email es ${this.email}.`
    );
  }

  // M√©todos est√°ticos - pertenecen a la clase, no a las instancias
  static descripcion() {
    console.log("   Esta clase representa un usuario con nombre, email y fecha de nacimiento.");
  }

  static cantidad() {
    return User.countUser;
  }
}

console.log("\nüéØ Creando objetos (instancias) de la clase User:");

// Creamos m√∫ltiples usuarios usando la clase como molde
const usuario = new User("Ana", "ana@example.com", "1990-01-01");
const usuario2 = new User("Luis", "luis@example.com", "1985-05-15");
const usuario3 = new User("Marta", "marta@example.com", "2000-10-10");

console.log("\nüëã Cada usuario puede saludar:");
usuario.saludar();
usuario2.saludar();
usuario3.saludar();

console.log("\nüîß Modificando datos del usuario:");
usuario.setNombre("Luisa");
let nombreActualizado = usuario.getNombre();
console.log("   Nombre actualizado:", nombreActualizado);

console.log("\nüìä Informaci√≥n de la clase:");
User.descripcion();
console.log(`   Total de usuarios creados: ${User.cantidad()}`);

console.log("\n‚úÖ Conceptos aprendidos:");
console.log("   üèóÔ∏è  C√≥mo crear una clase con propiedades y m√©todos");
console.log("   üéØ C√≥mo crear objetos (instancias) usando 'new'");
console.log("   üìä M√©todos est√°ticos vs m√©todos de instancia");
console.log("   üîß Getters y setters para controlar el acceso a datos");

// üìã Ahora que entendemos las clases b√°sicas, veamos los CONCEPTOS FUNDAMENTALES DE POO:

// =================================================================
// üîí 2. ENCAPSULACI√ìN - PROTEGER DATOS INTERNOS
// =================================================================

// La encapsulaci√≥n permite ocultar los detalles internos de un objeto
// y exponer solo lo necesario a trav√©s de m√©todos p√∫blicos

console.log("\nüîí 2. ENCAPSULACI√ìN:");
console.log("Protegemos los datos internos y controlamos el acceso");

class CuentaBancaria {
  #saldo; // Propiedad privada (privada con #)
  titular;

  constructor(titular, saldoInicial = 0) {
    this.titular = titular;
    this.#saldo = saldoInicial;
  }

  // M√©todo p√∫blico para acceder al saldo
  obtenerSaldo() {
    return this.#saldo;
  }

  // M√©todo p√∫blico para depositar
  depositar(cantidad) {
    if (cantidad > 0) {
      this.#saldo += cantidad;
      console.log(`Dep√≥sito de $${cantidad} realizado. Saldo actual: $${this.#saldo}`);
    } else {
      console.log("La cantidad debe ser mayor a 0");
    }
  }

  // M√©todo p√∫blico para retirar
  retirar(cantidad) {
    if (cantidad > 0 && cantidad <= this.#saldo) {
      this.#saldo -= cantidad;
      console.log(`Retiro de $${cantidad} realizado. Saldo actual: $${this.#saldo}`);
    } else {
      console.log("Fondos insuficientes o cantidad inv√°lida");
    }
  }
}

console.log("\nüí∞ Ejemplo pr√°ctico - Cuenta Bancaria:");
const cuenta = new CuentaBancaria("Juan P√©rez", 1000);
cuenta.depositar(500);
cuenta.retirar(200);
console.log(`   Saldo final de ${cuenta.titular}: $${cuenta.obtenerSaldo()}`);

// =================================================================
// üß¨ 3. HERENCIA - REUTILIZAR Y EXTENDER C√ìDIGO
// =================================================================

// La herencia permite crear nuevas clases basadas en clases existentes
// La clase hija hereda atributos y m√©todos de la clase padre

console.log("\nüß¨ 3. HERENCIA:");
console.log("Creamos nuevas clases basadas en clases existentes");

class Vehiculo {
  marca;
  modelo;
  a√±o;

  constructor(marca, modelo, a√±o) {
    this.marca = marca;
    this.modelo = modelo;
    this.a√±o = a√±o;
  }

  arrancar() {
    console.log(`${this.marca} ${this.modelo} est√° arrancando...`);
  }

  detener() {
    console.log(`${this.marca} ${this.modelo} se ha detenido.`);
  }

  obtenerInfo() {
    return `${this.marca} ${this.modelo} (${this.a√±o})`;
  }
}

// Clase hija que hereda de Vehiculo
class Coche extends Vehiculo {
  numeroPuertas;
  tipoCombustible;

  constructor(marca, modelo, a√±o, numeroPuertas, tipoCombustible) {
    super(marca, modelo, a√±o); // Llama al constructor de la clase padre
    this.numeroPuertas = numeroPuertas;
    this.tipoCombustible = tipoCombustible;
  }

  // M√©todo espec√≠fico de Coche
  abrirPuertas() {
    console.log(`Abriendo las ${this.numeroPuertas} puertas del ${this.modelo}`);
  }

  // Sobrescribir m√©todo de la clase padre (Polimorfismo)
  arrancar() {
    console.log(`El coche ${this.marca} ${this.modelo} est√° encendiendo el motor...`);
  }
}

// Otra clase hija que hereda de Vehiculo
class Motocicleta extends Vehiculo {
  cilindrada;
  tipoMoto;

  constructor(marca, modelo, a√±o, cilindrada, tipoMoto) {
    super(marca, modelo, a√±o);
    this.cilindrada = cilindrada;
    this.tipoMoto = tipoMoto;
  }

  hacerCaballito() {
    console.log(`${this.modelo} est√° haciendo un caballito!`);
  }

  // Sobrescribir m√©todo de la clase padre
  arrancar() {
    console.log(`La motocicleta ${this.marca} ${this.modelo} est√° encendiendo con un rugido...`);
  }
}

console.log("\nüöó Ejemplo pr√°ctico - Veh√≠culos:");

const miCoche = new Coche("Toyota", "Corolla", 2023, 4, "Gasolina");
const miMoto = new Motocicleta("Honda", "CBR600", 2022, 600, "Deportiva");

console.log("   üìã Informaci√≥n del coche:", miCoche.obtenerInfo());
console.log("   üìã Informaci√≥n de la moto:", miMoto.obtenerInfo());

console.log("\n   üîß Probando m√©todos:");
miCoche.arrancar(); // M√©todo sobrescrito
miCoche.abrirPuertas(); // M√©todo espec√≠fico de Coche
miCoche.detener(); // M√©todo heredado de Vehiculo

miMoto.arrancar(); // M√©todo sobrescrito
miMoto.hacerCaballito(); // M√©todo espec√≠fico de Motocicleta
miMoto.detener(); // M√©todo heredado de Vehiculo

// =================================================================
// üé≠ 4. POLIMORFISMO - MISMA ACCI√ìN, DIFERENTES FORMAS
// =================================================================

// El polimorfismo permite que objetos de diferentes clases
// respondan de manera diferente al mismo m√©todo

console.log("\nüé≠ 4. POLIMORFISMO:");
console.log("Misma acci√≥n, diferentes implementaciones");

const vehiculos = [
  new Vehiculo("Ford", "Fiesta", 2020),
  new Coche("BMW", "X5", 2023, 5, "Di√©sel"),
  new Motocicleta("Yamaha", "R1", 2023, 1000, "Deportiva"),
];

console.log("\n   üöÄ Cada veh√≠culo arranca diferente:");
vehiculos.forEach((vehiculo) => {
  console.log(`   üìç ${vehiculo.obtenerInfo()}`);
  console.log(`      `, vehiculo.arrancar ? vehiculo.arrancar() : "Arrancando..."); // Cada clase implementa arrancar() de forma diferente
});

// =================================================================
// üë• 5. EJEMPLO AVANZADO: SISTEMA DE EMPLEADOS
// =================================================================

console.log("\nüë• 5. EJEMPLO AVANZADO - Sistema de Empleados:");
console.log("Aplicamos herencia en un caso real de empresa");

class Empleado {
  nombre;
  apellido;
  salarioBase;

  constructor(nombre, apellido, salarioBase) {
    this.nombre = nombre;
    this.apellido = apellido;
    this.salarioBase = salarioBase;
  }

  calcularSalario() {
    return this.salarioBase;
  }

  obtenerNombreCompleto() {
    return `${this.nombre} ${this.apellido}`;
  }

  trabajar() {
    console.log(`${this.obtenerNombreCompleto()} est√° trabajando...`);
  }
}

class Gerente extends Empleado {
  bono;
  equipoACargo;

  constructor(nombre, apellido, salarioBase, bono, equipoACargo) {
    super(nombre, apellido, salarioBase);
    this.bono = bono;
    this.equipoACargo = equipoACargo;
  }

  calcularSalario() {
    return this.salarioBase + this.bono;
  }

  dirigirReunion() {
    console.log(
      `${this.obtenerNombreCompleto()} est√° dirigiendo una reuni√≥n con su equipo de ${
        this.equipoACargo
      } personas.`
    );
  }

  trabajar() {
    console.log(
      `${this.obtenerNombreCompleto()} est√° gestionando el equipo y tomando decisiones estrat√©gicas...`
    );
  }
}

class Desarrollador extends Empleado {
  lenguajes;
  proyectosCompletados;

  constructor(nombre, apellido, salarioBase, lenguajes, proyectosCompletados = 0) {
    super(nombre, apellido, salarioBase);
    this.lenguajes = lenguajes;
    this.proyectosCompletados = proyectosCompletados;
  }

  calcularSalario() {
    const bonoPorProyecto = this.proyectosCompletados * 100;
    return this.salarioBase + bonoPorProyecto;
  }

  programar() {
    console.log(
      `${this.obtenerNombreCompleto()} est√° programando en ${this.lenguajes.join(", ")}...`
    );
  }

  trabajar() {
    console.log(
      `${this.obtenerNombreCompleto()} est√° desarrollando software y resolviendo bugs...`
    );
  }
}

console.log("\nüíº Simulaci√≥n del sistema:");

const empleados = [
  new Empleado("Ana", "Garc√≠a", 2000),
  new Gerente("Carlos", "L√≥pez", 5000, 2000, 8),
  new Desarrollador("Mar√≠a", "Rodr√≠guez", 3500, ["JavaScript", "Python", "Java"], 5),
];

empleados.forEach((empleado) => {
  console.log(`   üë§ ${empleado.obtenerNombreCompleto()}: Salario $${empleado.calcularSalario()}`);
  console.log(`       ${empleado.trabajar ? empleado.trabajar() : "Trabajando..."}`);

  if (empleado instanceof Gerente) {
    console.log(
      `       ${empleado.dirigirReunion ? empleado.dirigirReunion() : "Dirigiendo reuni√≥n..."}`
    );
  } else if (empleado instanceof Desarrollador) {
    console.log(`       ${empleado.programar ? empleado.programar() : "Programando..."}`);
  }
  console.log("   " + "-".repeat(50));
});

// =================================================================
// üìù RESUMEN DE CONCEPTOS APRENDIDOS
// =================================================================

console.log("\nüìù RESUMEN DE CONCEPTOS:");
console.log("üîí Encapsulaci√≥n: Ocultar detalles internos y exponer solo lo necesario");
console.log("üß¨ Herencia: Crear nuevas clases basadas en clases existentes (extends, super)");
console.log("üé≠ Polimorfismo: Diferentes clases responden de manera diferente al mismo m√©todo");
console.log("‚ö° La herencia permite reutilizar c√≥digo y crear jerarqu√≠as de clases");
console.log("üîß El uso de 'super()' llama al constructor de la clase padre");
console.log("üéØ Los m√©todos pueden ser sobrescritos en las clases hijas");

// =================================================================
// üéâ CONCLUSI√ìN
// =================================================================

console.log("\n" + "=".repeat(60));
console.log("üéâ ¬°FELICIDADES! Has completado POO y Herencia en JavaScript");
console.log("‚úÖ Encapsulaci√≥n con propiedades privadas");
console.log("‚úÖ Herencia con extends y super");
console.log("‚úÖ Polimorfismo con sobrescritura de m√©todos");
console.log("‚úÖ Casos pr√°cticos reales");
console.log("üöÄ ¬°Est√°s listo para los ejercicios pr√°cticos!");
console.log("=".repeat(60));
